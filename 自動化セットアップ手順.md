# CMEã‚¹ã‚¯ãƒ¬ã‚¤ãƒ‘ãƒ¼è‡ªå‹•åŒ–ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

## ğŸ“‹ å‰ææ¡ä»¶
- macOSã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã“ã¨
- Pythonã®ä»®æƒ³ç’°å¢ƒï¼ˆvenvï¼‰ãŒä½œæˆæ¸ˆã¿ã§ã‚ã‚‹ã“ã¨
- `service_account.json`ãŒé…ç½®æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨

## ğŸš€ è‡ªå‹•åŒ–ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```bash
cd /Users/suzukiyuu/Desktop/CME
mkdir -p logs
```

### ã‚¹ãƒ†ãƒƒãƒ—2: plistãƒ•ã‚¡ã‚¤ãƒ«ã®æº–å‚™ã¨ç™»éŒ²

#### 2-1. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰plistãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `com.cme.scraper.plist.template` ãŒã‚ã‚‹å ´åˆï¼š

1. ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ï¼š
   ```bash
   cp com.cme.scraper.plist.template com.cme.scraper.plist
   ```

2. `com.cme.scraper.plist` ã‚’ç·¨é›†ã—ã¦ã€ä»¥ä¸‹ã®ç®‡æ‰€ã‚’è‡ªåˆ†ã®ç’°å¢ƒã«åˆã‚ã›ã¦å¤‰æ›´ï¼š
   - `YOUR_USERNAME` ã‚’è‡ªåˆ†ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã«å¤‰æ›´ï¼ˆä¾‹: `suzukiyuu`ï¼‰
   - `YOUR_PROJECT_PATH` ã‚’ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å®Ÿéš›ã®ãƒ‘ã‚¹ã«å¤‰æ›´ï¼ˆä¾‹: `Documents/CME`ï¼‰
   
   ä¾‹ï¼š
   ```xml
   <!-- å¤‰æ›´å‰ -->
   <string>/Users/YOUR_USERNAME/YOUR_PROJECT_PATH/venv/bin/python3</string>
   
   <!-- å¤‰æ›´å¾Œï¼ˆä¾‹ï¼‰ -->
   <string>/Users/suzukiyuu/Documents/CME/venv/bin/python3</string>
   ```

**ã¾ãŸã¯ã€æ—¢å­˜ã® `com.cme.scraper.plist` ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹å ´åˆï¼š**

ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ãƒ‘ã‚¹ã‚’ç¢ºèªã—ã€è‡ªåˆ†ã®ç’°å¢ƒã«åˆã‚ã›ã¦ç·¨é›†ã—ã¦ãã ã•ã„ã€‚

#### 2-2. plistãƒ•ã‚¡ã‚¤ãƒ«ã‚’launchdã«ç™»éŒ²

ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd /path/to/CME

# plistãƒ•ã‚¡ã‚¤ãƒ«ã‚’launchdã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼
cp com.cme.scraper.plist ~/Library/LaunchAgents/

# launchdã«ç™»éŒ²
launchctl load ~/Library/LaunchAgents/com.cme.scraper.plist
```

### ã‚¹ãƒ†ãƒƒãƒ—3: å‹•ä½œç¢ºèª
ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã€ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèªï¼š

```bash
# ç™»éŒ²çŠ¶æ³ã‚’ç¢ºèª
launchctl list | grep cme

# ãƒ­ã‚°ã‚’ç¢ºèªï¼ˆå®Ÿè¡Œå¾Œï¼‰
tail -f /Users/suzukiyuu/Desktop/CME/logs/output.log
```

### ã‚¹ãƒ†ãƒƒãƒ—4: æ‰‹å‹•å®Ÿè¡Œã§ãƒ†ã‚¹ãƒˆ
ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š

```bash
cd /Users/suzukiyuu/Desktop/CME
source venv/bin/activate
python main.py
```

æ­£å¸¸ã«å‹•ä½œã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

## â° å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ä»¥ä¸‹ã®æ™‚åˆ»ã«è‡ªå‹•å®Ÿè¡Œã•ã‚Œã¾ã™ï¼š
- **9:00** (æ—¥æœ¬æ™‚é–“)
- **15:00** (æ—¥æœ¬æ™‚é–“)
- **21:00** (æ—¥æœ¬æ™‚é–“)
- **3:00** (æ—¥æœ¬æ™‚é–“)

## ğŸ”§ ã‚ˆãã‚ã‚‹æ“ä½œ

### è‡ªå‹•å®Ÿè¡Œã‚’åœæ­¢ã™ã‚‹
```bash
launchctl unload ~/Library/LaunchAgents/com.cme.scraper.plist
```

### è‡ªå‹•å®Ÿè¡Œã‚’å†é–‹ã™ã‚‹
```bash
launchctl load ~/Library/LaunchAgents/com.cme.scraper.plist
```

### ãƒ­ã‚°ã‚’ç¢ºèªã™ã‚‹
```bash
# æ­£å¸¸ãªå‡ºåŠ›ãƒ­ã‚°
cat /Users/suzukiyuu/Desktop/CME/logs/output.log

# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°
cat /Users/suzukiyuu/Desktop/CME/logs/error.log
```

### è¨­å®šã‚’å¤‰æ›´ã—ãŸå ´åˆï¼ˆplistãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†å¾Œï¼‰
```bash
# ä¸€åº¦åœæ­¢
launchctl unload ~/Library/LaunchAgents/com.cme.scraper.plist

# plistãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†ã‚³ãƒ”ãƒ¼
cp /Users/suzukiyuu/Desktop/CME/com.cme.scraper.plist ~/Library/LaunchAgents/

# å†åº¦ç™»éŒ²
launchctl load ~/Library/LaunchAgents/com.cme.scraper.plist
```

## âš ï¸ æ³¨æ„äº‹é …
- MacãŒã‚¹ãƒªãƒ¼ãƒ—ã—ã¦ã„ã‚‹å ´åˆã¯å®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ï¼ˆMacã‚’èµ·å‹•ã—ãŸã¾ã¾ã«ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚Šã¾ã™ï¼‰
- å®Ÿè¡Œæ™‚åˆ»ã«MacãŒèµ·å‹•ã—ã¦ã„ãªã„å ´åˆã€ãã®å›ã®å®Ÿè¡Œã¯ã‚¹ã‚­ãƒƒãƒ—ã•ã‚Œã¾ã™
- ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã¯è‡ªå‹•çš„ã«è¿½è¨˜ã•ã‚Œã‚‹ãŸã‚ã€å®šæœŸçš„ã«ç¢ºèªãƒ»å‰Šé™¤ã™ã‚‹ã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™
